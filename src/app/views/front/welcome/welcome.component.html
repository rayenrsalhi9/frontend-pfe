<div class="main-wrapper">
  <div class="content-container">
    <!-- Latest Blogs Section -->
    <section class="news-section">
      <div class="section-header">
        <h3 class="section-title">Latest Blogs</h3>
        <p>Check out what others are talking about.</p>
      </div>

      <div
        *ngIf="latestBlogs?.length > 0; else noBlogs"
        class="news-grid"
      >
        <div
          *ngFor="let blog of latestBlogs"
          class="news-card"
          (click)="viewBlog(blog)"
        >
          <div class="news-card-image">
            <img
              [src]="
                blog?.picture
                  ? getHost() + blog.picture
                  : '/assets/images/others/bg-4.jpg'
              "
              [alt]="blog?.title"
            />
            <span class="news-badge">{{ blog?.category?.name }}</span>
          </div>
          <div class="news-card-content">
            <div class="news-meta">
              {{ blog?.createdAt | utcToLocalTime: "shortDate" }}
            </div>
            <h4 class="news-title">{{ blog?.title }}</h4>
            <p class="news-preview">{{ blog?.shortText }}</p>
          </div>
        </div>
      </div>
      <ng-template #noBlogs>
        <div class="muted-placeholder">
          <p>No blogs available at the moment.</p>
        </div>
      </ng-template>
    </section>

    <!-- Main Content Grid (Forum & Survey) -->
    <div class="main-grid">
      <!-- Left: Latest Forum -->
      <div class="forum-column">
        <div class="section-header">
          <h3 class="section-title">
            {{ "WELCOME.LATEST_FORUM" | translate }}
          </h3>
          <p>See what others are talking about.</p>
        </div>

        <div
          *ngIf="latestForums?.length > 0; else noForums"
          class="forum-list"
        >
          <div
            *ngFor="let forum of latestForums"
            class="forum-card"
            [routerLink]="'/forum/' + forum?.id"
          >
            <div class="forum-card-body">
              <span class="category-badge">{{ forum?.category?.name }}</span>
              <h4 class="forum-item-title">{{ forum?.title }}</h4>
              <div class="forum-item-meta">
                <span
                  >By {{ forum?.creator?.firstName }}
                  {{ forum?.creator?.lastName }}</span
                >
                <span class="meta-dot"></span>
                <span>{{ forum?.createdAt | utcToLocalTime: "shortDate" }}</span>
              </div>
            </div>
          </div>
          <div class="view-all-wrapper">
            <a routerLink="/forum" class="view-all-link"
              >View all discussions â†’</a
            >
          </div>
        </div>
        <ng-template #noForums>
          <div class="muted-placeholder">
            <p>No forum discussions yet.</p>
          </div>
        </ng-template>
      </div>

      <!-- Right: Survey -->
      <div class="survey-column">
        <div *ngIf="survey" class="survey-card">
          <div class="survey-header">
            <h3 class="section-title">{{ "WELCOME.SURVEY" | translate }}</h3>
          </div>
          <div class="survey-body">
            <p class="survey-question">{{ survey?.title }}</p>

            <div class="survey-actions">
              <ng-container *ngIf="survey?.type == 'simple'">
                <button (click)="surveyAnswer(1)" class="btn-survey btn-yes">
                  {{ "BUTONS.YES" | translate }}
                </button>
                <button (click)="surveyAnswer(0)" class="btn-survey btn-no">
                  {{ "BUTONS.NO" | translate }}
                </button>
              </ng-container>

              <ng-container *ngIf="survey?.type == 'rating'">
                <div class="rating-wrapper">
                  <rating
                    (onHover)="surveyAnswer($event)"
                    [max]="5"
                    [readonly]="isReadonly"
                  ></rating>
                </div>
              </ng-container>

              <ng-container *ngIf="survey?.type == 'satisfaction'">
                <button (click)="surveyAnswer(0)" class="btn-survey btn-yes">
                  {{ "BUTONS.SATISFIED" | translate }}
                </button>
                <button
                  (click)="surveyAnswer(1)"
                  class="btn-survey btn-neutral"
                >
                  {{ "BUTONS.NEUTRAL" | translate }}
                </button>
                <button (click)="surveyAnswer(2)" class="btn-survey btn-no">
                  {{ "BUTONS.NOT_SATISFIED" | translate }}
                </button>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>